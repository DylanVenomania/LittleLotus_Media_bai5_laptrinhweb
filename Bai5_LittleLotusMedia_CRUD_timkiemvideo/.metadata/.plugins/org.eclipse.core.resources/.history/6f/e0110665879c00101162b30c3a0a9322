<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Little Lotus - Xem Videos Hot</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&family=Nunito:wght@300;600&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" th:href="@{/css/public.css}">
</head>
<body>
    <header>
        <h1 style="display: inline-block; margin: 0;">Little Lotus Stream</h1>
        
        <div class="header-links">
            <th:block th:if="${loggedInUser != null}">
                <a th:href="@{/user/videos/upload}" style="font-weight: bold; color: var(--primary-color);">
                    + Đăng Video
                </a> 
                |
                <span th:text="'Chào, ' + ${loggedInUser.username}" style="margin-right: 10px; color: #888;"></span>
                <a th:href="@{/logout}">Logout</a>
            </th:block>

            <th:block th:unless="${loggedInUser != null}">
                <a th:href="@{/login}">Đăng nhập</a>
            </th:block>
            
            |
            <a th:href="@{/admin}">Admin</a>
        </div>
    </header>

    <main class="video-feed">
        <h2 style="text-align: center; margin-bottom: 25px; font-family: var(--font-serif); color: #555;">Dòng Video Mới Nhất</h2>
        
        <div th:each="video : ${videos}" class="video-item">
            
            <div class="video-container">
                <iframe th:src="${video.videoUrl}" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen>
                </iframe>
            </div>
            
            <div class="video-info">
                <h3 th:text="${video.title}">Tiêu đề Video</h3>
                <p><strong>Người đăng:</strong> <span th:text="${video.uploader.username}">Người dùng</span></p> 
                <p>Danh mục: <span th:text="${video.category.name}">Tên Danh mục</span></p>
                <p th:text="${video.description}">Mô tả ngắn gọn về video.</p>
            </div>
        </div>
        
        <div th:if="${videos.isEmpty()}" style="text-align: center; padding: 30px;">
            <p style="font-style: italic; color: #888;">Chưa có video nào được đăng. Hãy là người đầu tiên!</p>
        </div>
    </main>
    
    <footer>
        <p>&copy; 2025 Little Lotus</p>
    </footer>
</body>
</html>